# Running Everything: Complete Instructions

## Current Status

The visualization codes are ready in your notebook (Cells 88-89), but to run them, you need:

1. **The h5ad data files** - These are generated by running earlier notebook cells
2. **Proper Python environment** - Jupyter is installed in Python 3.11.9, but we've been using Python 3.14

## Two Options to Run Everything

### Option 1: Run in Jupyter Notebook (Recommended)

This is the simplest approach since all dependencies are configured in your Jupyter environment:

1. **Start Jupyter Notebook:**
   ```bash
   jupyter notebook ADSPROJECT_new.ipynb
   ```
   Or if that doesn't work, use pyenv to switch to Python 3.11.9 first:
   ```bash
   pyenv global 3.11.9
   jupyter notebook ADSPROJECT_new.ipynb
   ```

2. **Run all cells from the beginning:**
   - Go to Kernel → Restart & Run All
   - OR run cells sequentially from the start to build up the data

3. **Visualizations will be generated:**
   - Cell 88 creates: `forum_umap_by_stage.png`
   - Cell 89 creates: `forum_health_score_boxplot.png`

### Option 2: Use Python 3.11.9 Environment

If you want to run from command line:

```bash
# Switch to Python 3.11.9 (where jupyter and all dependencies work)
pyenv global 3.11.9

# Execute the notebook
jupyter nbconvert --to notebook --execute --inplace ADSPROJECT_new.ipynb --ExecutePreprocessor.timeout=600

# Or execute just the visualization cells
# (You'll need to run earlier cells first to generate the data)
```

## What Needs to Happen First

Before running the visualization cells (88-89), you need to run earlier cells that:

1. **Load and process the raw data** (Kallisto files)
2. **Compute UMAP embeddings** (adds `X_umap` to `adata.obsm`)
3. **Calculate health scores** (adds `oocyte_health_score` to `adata.obs`)
4. **Save intermediate files** (e.g., `adata_trajectory_complete.h5ad`)

## Quick Check: What Data Exists Now?

Based on the current directory:
- ✅ `sample_metadata_with_age.csv` - Has sample metadata with stages
- ✅ `clinical_decision_framework_final.csv` - Has cellular age and risk data
- ❌ No `.h5ad` files - These need to be generated by running notebook cells

## Recommended Action

**Run the notebook in Jupyter from the beginning** to generate all required data files, then the visualization cells will work automatically.

The visualization codes are already written and ready - they just need the data files to exist first!

